@using Dekhlo.Web.Models;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>GP | @ViewBag.Title</title>


    <link rel="icon" href="@Url.Content("~/Images/favicon.ico")" />
    <link rel="stylesheet" href="@Url.Content("~/Style/jquery-ui.css")" />
    <!-- Bootstrap -->
    <link href="@Url.Content("~/App_Themes/Bootstrap/css/bootstrap.css")" rel="stylesheet" />
    <link href="@Url.Content("~/App_Themes/Bootstrap/css/font-awesome.css")" rel="stylesheet" />
    <link href="@Url.Content("~/App_Themes/Bootstrap/css/bootstrap-social.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Style/flexslider.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Style/Style.css")" rel="stylesheet" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
                      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
                    <![endif]-->
    @* <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>*@

</head>
<body>
    <div class="container-fluid header-full">
        <div class="row">
            <div class="headerExtremeTop">
                <div class="container">
                    <div class="col-md-12 col-xs-12">
                        <div class="row">
                            <span class="pull-right">
                                @if (Request.IsAuthenticated)
                                {
                                    <a class="" href="@Url.Action("ContactUs", "Home")" title="Contact Us"><i class="fa fa-phone"></i></a> <text>|</text> 
                                    <a class="" href="@Url.Action("EmailUs", "Home")" title="Contact Us" style="margin-right:20px;"><i class="fa fa-envelope-o"></i></a>
                                    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @style = "display:inline;" }))
                                    {
                                    @Html.AntiForgeryToken()
                                    <a class="" href="javascript:document.getElementById('logoutForm').submit()" title="Logoff">Logoff
                                    </a>
                                    }
                                }
                                else
                                {
                                    <a class="" href="@Url.Action("ContactUs", "Home")" title="Contact Us"><i class="fa fa-phone"></i></a> <text>|</text> 
                                    <a class="" href="@Url.Action("EmailUs", "Home")" title="Contact Us" style="margin-right:20px;"><i class="fa fa-envelope-o"></i></a>
                                    @Html.ActionLink("Login", "Login", "Account", new { returnUrl = Url.Action("Manage", "Account", null)}, null) <text>|</text> @Html.ActionLink("Register", "Login", "Account") 
                                     
                                }

                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="col-md-12 col-xs-12">
                <div class="row">
                    <div class="col-md-3 col-xs-3 col-sm-12">
                        <div class="row">
                            @*<h2 style="font-family: 'Agency FB'">DarbhangaCity</h2>*@
                            @Html.Partial("~/Views/Shared/_Logo.cshtml")
                        </div>
                    </div>
                    <div class="col-md-9 col-xs-9 col-sm-12 headerSearchMain">
                        <div class="row">
                            <div class="row">
                                <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 socialIconMain">
                                    <div class="pull-right">
                                        @Html.Partial("_LoginPartial")
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 headerSearch">
                                <div class="row">
                                    @Html.Partial("~/Views/Home/_Search.cshtml")
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 col-xs-12">
                <div class="row">
                    <div class="col-md-12 col-xs-12 col-sm-12">
                        <div class="row">
                            <nav class="navbar navbar-inverse" style="margin-bottom: 0px; border-radius: 0px;">
                                <div class="container-fluid">
                                    <!-- Brand and toggle get grouped for better mobile display -->
                                    <div class="navbar-header">
                                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                            <span class="sr-only">Toggle navigation</span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                        </button>
                                        @* <a class="navbar-brand" href="#">Brand</a>*@
                                    </div>

                                    <!-- Collect the nav links, forms, and other content for toggling -->
                                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                                        <ul class="nav navbar-nav">
                                            @*<li class="active"></li>*@
                                            <li><a href="@Url.Action("Index", "Home")"><span class="glyphicon glyphicon-home"></span></a></li>
                                            <li>@Html.ActionLink("About City", "AboutCity", "Home")</li>
                                            @*<li>@Html.ActionLink("Pvc Adhar Card", "ApplyPvcAdharCard", "Home")</li>*@
                                            <li>@Html.ActionLink("Software Developement", "SoftwareDevelopment", "Home")</li>
                                            <li>@Html.ActionLink("Book Bus Ticket", "BookBusTicket", "Home")</li>
                                            <li>@Html.ActionLink("Book Hotel", "BookHotel", "Home")</li>
                                            <li>@Html.ActionLink("Book Movie Ticket", "BookMovieTicket", "Home")</li>
                                            <li>@Html.ActionLink("Share Your Memories", "ShareYourMemories", "Home")</li>
                                            <li class="dropdown">
                                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Search Your Needs <span class="caret"></span></a>
                                                <ul class="dropdown-menu">
                                                    @{
                                                        
                                                        PORTALEntitiy db = new PORTALEntitiy();
                                                        List<SearchYourNeedLink> links = db.SearchYourNeedLinks.ToList();
                                                        if (links != null && links.Count > 0)
                                                        {
                                                            foreach (SearchYourNeedLink item in links)
                                                            {
                                                        <li>@Html.ActionLink(item.LinkText, "SearchYourNeeds", "Home", new { type = item.LinkType }, null)</li> 
                                                            }

                                                        }
                                                    }
                                                    @*  <li>@Html.ActionLink("Carpenter", "Index", "Home", new { UseType="Carpenter" }, null)</li>
                                                    <li>@Html.ActionLink("Plumber", "Index", "Home", new { UseType="Plumber"}, null)</li>
                                                    <li>@Html.ActionLink("Electrician", "Index", "Home", new { UseType="Electrician"}, null)</li>
                                                    <li role="separator" class="divider"></li>
                                                    <li>@Html.ActionLink("Pandit", "Index", "Home", new { UseType="Pandit"}, null)</li>
                                                    <li role="separator" class="divider"></li>

                                                    <li>@Html.ActionLink("General Staff", "Index", "Home", new {UseType="GeneralStaff" }, null)</li>
                                                    <li>@Html.ActionLink("Shoe Maker", "Index", "Home", new {UseType="ShoeMaker" }, null)</li>
                                                    <li>@Html.ActionLink("Cook", "Index", "Home", new {UseType="Cook" }, null)</li>
                                                    <li>@Html.ActionLink("Tent House", "Index", "Home", new {UseType="TentHouse" }, null)</li>
                                                    <li>@Html.ActionLink("Toilet Cleaning Staff", "Index", "Home", new {UseType="ToiletCleaningStaff" }, null)</li>
                                                    <li>@Html.ActionLink("Driver", "Index", "Home", new {UseType="Driver" }, null)</li>*@
                                                </ul>
                                            </li>
                                        </ul>
                                        @*<ul class="nav navbar-nav navbar-right">
                                            <li><a href="#">Link</a></li>
                                            <li class="dropdown">
                                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                                                <ul class="dropdown-menu">
                                                    <li><a href="#">Action</a></li>
                                                    <li><a href="#">Another action</a></li>
                                                    <li><a href="#">Something else here</a></li>
                                                    <li role="separator" class="divider"></li>
                                                    <li><a href="#">Separated link</a></li>
                                                </ul>
                                            </li>
                                        </ul>*@
                                    </div>
                                    <!-- /.navbar-collapse -->
                                </div>
                                <!-- /.container-fluid -->
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @if (ViewBag.Title == "Index"
        || ViewBag.Title == "ApplyPvcAdharCard")
    {
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12 col-xs-12">
                    <div class="example1">
                        @Html.Partial("~/Views/Home/_ScrollingText.cshtml")
                    </div>
                </div>
            </div>
        </div>
    }
    else if (ViewBag.Title == "AboutUs"
        || ViewBag.Title == "ContactUs"
        || ViewBag.Title == "EmailUs"
        || ViewBag.Title == "ShareYourMemories"
        || ViewBag.Title == "SearchYourNeeds"
        || ViewBag.Title == "SinglePost")
    {
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-xs-12">
                    <div class="example2">
                        @Html.Partial("~/Views/Home/_TopScrollingAds.cshtml")
                    </div>
                </div>
            </div>
        </div>
    }

    <div class="container">

        <div class="col-md-12 col-xs-12" style="">
            @*<div class="row">*@
            @if (ViewBag.Title == "Index")
            {
                Html.RenderPartial("~/Views/Home/_Slider.cshtml");
            }

            <div class="col-md-12 col-xs-12 col-sm-12" style="background: #fff; border-radius: 6px; margin-top: 15px; margin-bottom: 15px; padding: 10px 10px;">
                @*<div class="row">*@
                @RenderBody()
                @*</div>*@
            </div>
            @*</div>*@
        </div>
    </div>
    <div class="container-fluid footerMain">
        <div class="row">
            <div class="footerBorder"></div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-md-12 col-xs-12 col-sm-12">
                    <div class="row">
                        <div class="col-md-12 col-xs-12 col-sm-12">
                            <div class="row divFooter">
                                <div class="col-md-4 col-xs-4 col-sm-12">
                                    <table class="table table-hover">
                                        <tbody>
                                            <tr>
                                                <td>@Html.ActionLink("Popular Searches", "PopularSearches", "Home")</td>
                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("About Us", "AboutUs", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Contact Us", "ContactUs", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Cancellation & Returns", "CancellationReturns", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("FAQ", "FAQ", "Home")</td>
                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Payments", "Payments", "Home")</td>
                                            </tr>
                                            <tr>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-4 col-xs-4 col-sm-12">
                                    <table class="table table-hover">
                                        <tbody>
                                            <tr>
                                                <td>@Html.ActionLink("Feature Ads", "FeatureAds", "Home")</td>
                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Join Darbhannga City", "JoinDarbhanngaCity", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Terms And Condition", "TermsAndCondition", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Advertise With Us", "AdvertiseWithUs", "Home")</td>

                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Important Links", "ImportantLinks", "Home")</td>
                                            </tr>
                                            <tr>
                                                <td>@Html.ActionLink("Location Where We Are", "LocationWhereWeAre", "Home")</td>
                                            </tr>
                                            <tr>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-4 col-xs-4 col-sm-12">
                                    <div style="height: 236px; overflow: scroll; overflow-x: hidden;" class="fb-page" data-href="https://www.facebook.com/darbhangacitydekhlo/" data-tabs="timeline, events, messages" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
                                        <div class="fb-xfbml-parse-ignore">
                                            <blockquote cite="https://www.facebook.com/darbhangacitydekhlo/"><a href="https://www.facebook.com/darbhangacitydekhlo/">Darbhanga City Dekhlo</a></blockquote>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="@Url.Content("~/Scripts/jquery-1.9.1.js")"></script>
    @*<script src="@Url.Content("~/Scripts/jquery-2.2.2.min.js")"></script>*@

    <script src="@Url.Content("~/Scripts/jquery-ui-1.11.4.min.js")"></script>
    <script src="@Url.Content("~/App_Themes/Bootstrap/js/bootstrap.min.js")" type="text/javascript"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="@Url.Content("~/App_Themes/Bootstrap/js/ie10-viewport-bug-workaround.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.mousewheel-3.1.12.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.jcarousellite.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.flexslider-min.js")" type="text/javascript"></script>
    @Html.Partial("~/Views/Shared/_GoogleAnalyse.cshtml")
    @RenderSection("scripts", required: false)
    <script type="text/javascript">
        $(document).ready(function () {
            $('#CreatedOn').datepicker();
            $('#UpdatedOn').datepicker();

            $.each($('.divAddPostImage'), function (index, div) {
                if (div != null) {
                    if ($(div).find('img').prop('src') != "" && $(div).find('img').prop('src') != window.location.href.replace("#", "")) {
                        $(div).find('.spanPlus').hide();
                    }
                    else {
                        $(div).find('.spanPlus').show();
                    }
                }
            });
        });

        function InputFileChange(fldUpload, fldDiv) {
            var file = fldUpload.files[0];
            if (file != null && file != undefined && fldDiv != undefined && fldDiv != null
                && $('#' + fldDiv) != undefined && $('#' + fldDiv) != null) {
                var reader = new FileReader();
                reader.onloadend = function () {
                    $('#' + fldDiv).find('img').prop('src', reader.result);
                    $('#' + fldDiv).find('.spanPlus').hide();
                }
                reader.readAsDataURL(file);
            }
        }

        function RemoveBrowsedAttachment(spanParentDiv, fldControlId, fldControlName) {
            if ($('#' + spanParentDiv).find('img').prop("src") != null && $('#' + spanParentDiv).find('img').prop("src") != "") {
                if (fldControlId != "" && fldControlName != "") {
                    $('#' + fldControlId).replaceWith("<input id='" + fldControlId + "' name='" + fldControlName + "' class='input-file' type='file' style='display: none;' onchange=\"javascript: InputFileChange(this, '" + $('#' + spanParentDiv).prop('id') + "');\" />");
                }
                if (spanParentDiv != "") {
                    $('#' + spanParentDiv).find('img').prop("src", "");
                    $('#' + spanParentDiv).find('input').prop("value", "0");
                    $('#' + spanParentDiv).find('.spanPlus').show();
                }
            }
        }

        function ShowPlusAndCross(spanParentDiv) {
            if (spanParentDiv != null) {
                var div = spanParentDiv;
                if (div != null) {
                    if ($(div).find('img').prop('src') != "" && $(div).find('img').prop('src') != window.location.href.replace("#","")) {
                        $(div).find('.spanPlus').hide();
                        $(div).find('.spanRemove').show();
                    }
                    else {
                        $(div).find('.spanPlus').show();
                        $(div).find('.spanRemove').hide();
                    }
                }
            }
        }

        function HideCross(spanParentDiv) {
            if (spanParentDiv != null) {
                var div = spanParentDiv;
                if (div != null) {
                    $(div).find('.spanRemove').hide();
                }
            }
        }

        function Success() {

        }

        function Failure() {

        }

        window.addEventListener("submit", function (e) {
            var form = e.target;
            //var isValid = "@Html.Raw(Json.Encode(ViewData.ModelState.IsValid))";
            //if (isValid) {
            if (form.getAttribute("enctype") === "multipart/form-data") {
                if (form.dataset.ajax) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    var xhr = new XMLHttpRequest();
                    xhr.open(form.method, form.action);
                    xhr.onreadystatechange = function () {
                        if (xhr.readyState == 4 && xhr.status == 200) {
                            if (form.dataset.ajaxUpdate) {
                                var updateTarget = document.querySelector(form.dataset.ajaxUpdate);
                                if (updateTarget) {
                                    var temp = document.createElement('div');
                                    temp.innerHTML = xhr.responseText;
                                    var htmlObject = temp.children[0];
                                    switch (form.getAttribute("data-ajax-mode").toUpperCase()) {
                                        case "BEFORE":
                                            updateTarget.insertBefore(htmlObject, updateTarget.firstChild);
                                            break;
                                        case "AFTER":
                                            updateTarget.appendChild(htmlObject);
                                            break;
                                        case "REPLACE":
                                           // alert(htmlObject.outerHTML);
                                            updateTarget.innerHTML = htmlObject.outerHTML;
                                            break;
                                        default:
                                            break;
                                    }

                                }
                            }
                        }
                    };
                    xhr.send(new FormData(form));
                }
            }
            //}
            //else
            //{
            //    alert(isValid);
            //}
        }, true);

        $(".topAddListing").jCarouselLite({
            auto: 3000,
            speed: 2000,
            vertical: false,
            circular: true,
            mouseWheel: true,
            visible: 10
        });

        function CheckMobileAlreadyExist(txt) {
            if (txt != null) {
                var mobileNumber = txt.value;
                if (mobileNumber != null && mobileNumber != "") {
                    $.ajax({
                        url: '@Url.Action("CheckMobileAlreadyExist", "Account")',
                        data: JSON.stringify({ 'mobileNumber': mobileNumber }),
                        type: 'POST',
                        dataType: 'html',
                        contentType: 'application/json',
                        success: function (data) {
                            if (data != undefined && data != null && data != "" && data != "Not Found") {
                                
                            }
                        },
                        error: function (data) {
                            //alert("Please reload the page");
                        },
                    });
                }
            }
        }

        function GetSuggestion(e)
        {
            var regex = new RegExp("^[a-zA-Z0-9]+$");
            var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
            if (regex.test(str)) {
                return false;
            }
            //e.preventDefault();
            //return false;

            searchTerm = document.getElementById('txtSearch').value;
            var searchParameter = "";
            if (document.getElementById('selectSearch').selectedOptions[0].innerText != "All")
                searchParameter = searchTerm;//document.getElementById('selectSearch').selectedOptions[0].innerText + " " +
            else
                searchParameter = searchTerm;

            if (searchParameter != "" && searchTerm != "" && searchTerm.length > 3) {
                $.ajax({
                    url: '@Url.Action("SearchSuggestion", "Home")',
                    data: JSON.stringify({ 'searchParameter': searchParameter }),
                    type: 'POST',
                    dataType: 'html',
                    contentType: 'application/json',
                    success: function (data) {
                        if (data != undefined && data != null && data != "") {
                            document.getElementById('divSearchContent').innerHTML = data;
                            $(document.getElementById('divSearchContent')).show();
                        }
                        else {
                            $(document.getElementById('divSearchContent')).hide();
                        }
                    },
                    error: function (data) {
                        $(document.getElementById('divSearchContent')).hide();
                    },
                });
            }
        }
    </script>

    <script type="text/javascript">

        $(window).load(function () {
            $('.flexslider').flexslider({
                animation: "slide",
                itemWidth: 100,
                itemMargin: 5,
                controlNav: false,
                animationLoop: true,
                slideshow: true,
                maxItems: 10,
                move: 4,
                initDelay: 1,
                animationSpeed: 1000,
                slideshowSpeed: 10000,
                pauseOnHover: true,
                prevText: " ",
                nextText: " ",
                mousewheel: true,
                pausePlay: true,
                pauseText: " ",
                playText: " ",
                start: function (slider) {
                    $('body').removeClass('loading');
                }
            });
        });
    </script>

    <div id="fb-root"></div>
    <script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.6";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</body>
</html>
